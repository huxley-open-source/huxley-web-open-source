<div class="container content">
  <div class="box">
    <th-head header-title="'institution.edit-institution'"></th-head>


    <div class="editProfile">
      <div class="editPhoto">
        <div class="loading" ng-if="loading">
          {{ 'user.edit.loading' | translate}}.
        </div>
        <div>
          <div><img width="330px" height="248px" src="{{cropper.sourceImage}}" /></div>
          <div class="file-input">
            {{ 'user.edit.changeImage' | translate}}.
            <input type="file" onchange="angular.element(this).scope().sendImage(this.files)" accept="image/jpeg, image/png" class="input-hidden"/>
          </div>
        </div>
      </div>

      <div class="profileForm">
        <div class="create-form">
          <form ng-submit="sendInstitution()" name="editProfileForm">
            <div class="form-group" ng-class="{'has-error': editProfileForm.name.$dirty && !editProfileForm.name.$valid}">
              <label class="col-sm-2 control-label" for="name">{{ 'user.edit.name' | translate}}</label>
              <div class="col-sm-10">
                <input ng-change="instValidate()" class="form-control" type="text" id="name" ng-maxlength="form.maxLength" name="name" ng-model="form.institutionName" placeholder="{{ 'institution.name' | translate}}" required>
              </div>
              <div class="align-form-error">
                <span class="help-block" ng-if="editProfileForm.name.$dirty && editProfileForm.name.$error.required">{{ 'user.edit.required' | translate}}.</span>
                <span class="help-block" ng-if="editProfileForm.name.$dirty && editProfileForm.name.$error.maxlength">{{ 'user.edit.longName' | translate}}.</span>
              </div>
            </div>
            <div class="form-group" ng-class="{'has-error': editProfileForm.acronym.$dirty && !editProfileForm.acronym.$valid}">
              <label class="col-sm-2 control-label" for="acronym">{{ 'institution.acronym' | translate}}</label>
              <div class="col-sm-10">
                <input ng-change="checkChanges()" class="form-control" type="text" id="acronym" ng-maxlength="form.maxAcronymLength" name="acronym" ng-model="form.acronym" placeholder="{{ 'institution.acronym' | translate}}" required>
              </div>
              <div class="align-form-error">
                <span class="help-block" ng-if="editProfileForm.acronym.$dirty && editProfileForm.acronym.$error.required">{{ 'user.edit.required' | translate}}.</span>
                <span class="help-block" ng-if="editProfileForm.acronym.$dirty && editProfileForm.acronym.$error.maxlength">{{ 'user.edit.longName' | translate}}.</span>
              </div>
            </div>
            <div class="institution-save-button">
              <span ng-show="saved">{{'institution.saved' | translate}}</span>
              <button ng-disabled="!enableConfirm" type="submit" class="btn btn-blue">{{'admin.save' | translate}}</button>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>
</div>

<div class="avatar-modal">
      <script type="text/ng-template" id="institutionModal.html">
        <div class="modal-header">
          <h3 class="modal-title">{{'user.edit.changeAvatar' | translate}}.</h3>
        </div>
        <div class="modal-body">
      <img th-cropper id="cropper" src="{{image}}" on-change="onload"/>
    </div>
    <div class="modal-footer">
      <button class="btn btn-primary" ng-click="ok()">{{'user.edit.change' | translate}}</button>
      <button class="btn btn-warning" ng-click="cancel()">{{'user.edit.cancel' | translate}}</button>
    </div>
  </script>
</div>
